package br.com.pentamc.bukkit.exploit;

import br.com.pentamc.bukkit.BukkitMain;
import br.com.pentamc.common.networking.packet.AnticheatBanPacket;
import org.bukkit.entity.Player;
import org.bukkit.scheduler.BukkitRunnable;

public interface Exploit {

	void register();

	default void disconnect(Player player, String reason, boolean ban) {
		new BukkitRunnable() {

			@Override
			public void run() {
				if (ban) {
					BukkitMain.getInstance().getPacketController().sendPacket(
							new AnticheatBanPacket(reason, System.currentTimeMillis() + (24 * 60 * 60 * 1000 * 14)),
							player);

					new BukkitRunnable() {

						@Override
						public void run() {
							if (player.isOnline())
								player.kickPlayer("§cDisconnected from the server!\n§f\n§7Reason: " + reason);
						}
					}.runTaskLater(BukkitMain.getInstance(), 20l);
				} else
					player.kickPlayer("§cDisconnected from the server!\n§f\n§7Reason: " + reason);
			}
		}.runTask(BukkitMain.getInstance());
	}

}
